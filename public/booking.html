<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Being Princess</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="style.css">
    <style>
        #card-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
        }

        .card {
            display: flex;
            flex-direction: column;
            justify-content: space-evenly;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            padding: 20px;
            max-width: 300px;
            text-align: center;
            flex: 1 0 auto;
            margin: 10px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            animation: fadeIn 1s ease;
        }

        .card:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .card h3 {
            color: #b918cb;
            margin-bottom: 10px;
        }

        .card p {
            color: #555;
            margin-bottom: 20px;
        }

        .card .price {
            color: #333;
            font-size: 1.2em;
            font-weight: bold;
        }

        .card .fa {
            color: #24a50e;
            font-size: 2em;
            margin-bottom: 10px;
        }

        .count {
            background: #E91E63;
            color: white;
            display: none;
            border-radius: 10px;
            width: fit-content;
            padding: 0 5px;
            font-size: smaller;
            float: right;
            position: relative;
            top: 40px;
            left: 15px;
        }

        .first-row {
            display: flex;
            flex-direction: row;
            justify-content: space-between;
        }

        .plus-minus {
            padding-top: 1.2em;
        }

        .plus-button,
        .minus-button {
            font-size: large;
            text-align: center;
            background: #24a50e;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
            width: 20px;
            box-shadow: 1px 1px 4px 0px black;
        }

        .minus-button {
            display: none;
        }

        .service-price {
            display: inline-block;
            padding: 5px 10px;
            margin-top: 10px;
            border: none;
            background: linear-gradient(to bottom right, rgb(110 100 255), rgb(235, 19, 181));
            color: white;
            border-radius: 5px;
            text-decoration: none;
            font-size: 1em;
            transition: background-color 0.3s ease;
        }

        #quotationBtn {
            display: block;
            margin: 30px auto;
            /* Centering the button */
            padding: 10px 20px;
            font-size: 1.2em;
            color: white;
            background-color: #24a50e;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease, transform 0.3s ease;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        #quotationBtn:hover {
            background-color: #1c7c0b;
            transform: scale(1.05);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

#quotationBtn:disabled {
    background-color: #b9b9b9ed;
    color: black;
    cursor: not-allowed;
}
    </style>
</head>

<body>
    <header>
        <h1>Being Princess</h1>
        <h4>Shine like a star</h4>
    </header>
    <main>
        <div id="card-container"></div>
        <button id="quotationBtn" onclick="quotationClick()">Get Quatation</button>
        <div class="about-us">
            <h3 class="headings">About Us</h3>
            <p> At Being Princess, our mission is to make you feel beautiful and confident. We are committed to
                delivering exceptional service, using only the highest quality products and the latest techniques in the
                beauty industry. Our serene and welcoming environment ensures that every visit is a blissful retreat
                from
                the hustle and bustle of everyday life. We are dedicated to ensuring that you receive personalized care
                and attention. We offer a wide range of services, including hair styling, skincare treatments,
                manicures, pedicures, and more. Each service is designed to enhance your natural beauty and leave you
                feeling refreshed and confident.</p>
            <img class="google-review" src="images/google-reviews.png" alt="Description of the image">
        </div>
    </main>

    <footer>
        <div><i class="fa fa-whatsapp"></i> +91 63918 68813 </div>
        <div><i class="fa fa-phone"></i> +91 86084 47437</div>
        <div><i class="fa fa-instagram"></i> being_princess_official</div>
        <div><i class="fa fa-envelope"></i> being.princess.parlour@gmail.com</div>
    </footer>
    <script>
        let quotationArray = [];

        fetch('menu.json')
            .then(response => response.json())
            .then(data => {
                data.eventBooking.forEach((element) => {
                    // Getting parent element
                    const menuList = document.getElementById("card-container");

                    // Creation of children
                    const menuCard = document.createElement('div');
                    const firstRow = document.createElement('div');
                    const name = document.createElement('h3');
                    const plusMinus = document.createElement('span');
                    const count = document.createElement('span');
                    const plusButton = document.createElement('button');
                    const minusButton = document.createElement('button');
                    const secondRow = document.createElement('div');
                    const desc = document.createElement('span');
                    const thirdRow = document.createElement('div');
                    const price = document.createElement('small');

                    // Assigning attributes to elements
                    menuCard.className = "card";
                    firstRow.className = "first-row";
                    name.className = "service-name";
                    name.innerText = element.service;
                    plusMinus.className = "plus-minus";
                    plusButton.className = "plus-button";
                    minusButton.innerHTML = "-";
                    minusButton.className = "minus-button";
                    plusButton.innerHTML = "+";
                    count.className = "count"
                    count.innerText = "0"
                    secondRow.className = "second-row";
                    desc.className = "service-desc";
                    desc.innerText = element.desc;
                    thirdRow.className = "third-row";
                    price.className = "service-price";
                    price.innerText = "â‚¹" + element.price;

                    // Append children
                    menuList.appendChild(menuCard);
                    menuCard.appendChild(firstRow);
                    menuCard.appendChild(secondRow);
                    menuCard.appendChild(thirdRow);
                    firstRow.appendChild(name);
                    firstRow.appendChild(plusMinus);
                    plusMinus.appendChild(minusButton);
                    plusMinus.appendChild(plusButton);
                    secondRow.appendChild(desc);
                    thirdRow.appendChild(price);
                    thirdRow.appendChild(count);

                    // Add event listener to plusButton
                    plusButton.addEventListener('click', () => {
                        const currentQuateObj = {
                            "id": element.id,
                            "service": element.service,
                            "price": element.price,
                            "count": 1,
                            "total": 0
                        };
                        let currentCount = parseInt(count.innerText);
                        count.innerText = (currentCount + 1).toString();
                        if (currentCount !== 1) {
                            minusButton.style.display = "inline-block";
                            count.style.display = "inline-block";
                        }
                        if (quotationArray.length == 0) {
                            quotationArray.push(currentQuateObj);
                        } else {
                            addItem(quotationArray, currentQuateObj);
                            console.log(quotationArray, 'plus');
                        }
                        isQuatationBtnDisable();
                    });

                    // Add event listener to minusButton
                    minusButton.addEventListener('click', () => {
                        const currentQuateObj = {
                            "id": element.id,
                            "service": element.service,
                            "price": element.price,
                            "count": 1,
                            "total": 0
                        };
                        let currentCount = parseInt(count.innerText);
                        if (currentCount > 0) {
                            count.innerText = (currentCount - 1).toString();
                        }
                        // Hide the minus button when count becomes zero
                        if (currentCount === 1) {
                            minusButton.style.display = "none";
                            count.style.display = "none";
                        }
                        removeItem(quotationArray, currentQuateObj);
                        console.log(quotationArray, 'minus');
                        isQuatationBtnDisable();
                    });

                    function addItem(items, newItem) {
                        const existingItemIndex = items.findIndex((item) => item.id === newItem.id);

                        if (existingItemIndex !== -1) {
                            // If ID exists, update count in a copy of the object
                            const updatedItem = { ...items[existingItemIndex], count: items[existingItemIndex].count + 1 };
                            quotationArray = [
                                ...items.slice(0, existingItemIndex),
                                updatedItem,
                                ...items.slice(existingItemIndex + 1),
                            ];
                        } else {
                            // If ID doesn't exist, push the new item
                            quotationArray = [...items, newItem];
                        }
                    }

                    function removeItem(items, newItem) {
                        const existingItemIndex = items.findIndex((item) => item.id === newItem.id);

                        if (existingItemIndex !== -1) {
                            // If ID exists, handle decrease or removal
                            if (items[existingItemIndex].count > 1) {
                                // Decrement count in a copy of the object (avoid mutation)
                                const updatedItem = { ...items[existingItemIndex], count: items[existingItemIndex].count - 1 };
                                quotationArray = [
                                    ...items.slice(0, existingItemIndex),
                                    updatedItem,
                                    ...items.slice(existingItemIndex + 1),
                                ];
                            } else {
                                // If count reaches 0, remove the item (optional)
                                quotationArray = items.filter((item) => item.id !== newItem.id);
                            }
                        } else {
                            // If ID doesn't exist, push the new item
                            quotationArray = [...items, newItem];
                        }
                    }
                });
            })
            .catch(error => console.error('Error fetching JSON:', error));

        function quotationClick() {
            const dataString = encodeURIComponent(JSON.stringify(quotationArray));
            window.location.href = `quotation.html?data=${dataString}`;
        }

        function isQuatationBtnDisable() {
            const quotationBtn = document.getElementById('quotationBtn');
            quotationBtn.disabled = quotationArray.length < 1;
        }
        isQuatationBtnDisable();
    </script>
</body>

</html>